\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{TEMPLATE}[2023/09/20 PhD Thesis Style]

% Base Packages
\RequirePackage{geometry}
\RequirePackage{graphicx}
\RequirePackage{array}
\RequirePackage{fancyhdr}
\RequirePackage{setspace}
\RequirePackage{xcolor}

% Title Page Configuration
\newcommand{\@logo}{logo_UDL.pdf}
\newcommand{\@specialty}{Acoustique}
\newcommand{\@ednumber}{162}
\newcommand{\@defensedate}{[Defense Date]}
\newcommand{\@thesisnumber}{[NNT]}
\newcommand{\@ecole}{École Centrale de Lyon}
\newcommand{\@jury}{}

% Custom Commands
\newcommand{\specialty}[1]{\renewcommand{\@specialty}{#1}}
\newcommand{\ednumber}[1]{\renewcommand{\@ednumber}{#1}}
\newcommand{\defensedate}[1]{\renewcommand{\@defensedate}{#1}}
\newcommand{\thesisnumber}[1]{\renewcommand{\@thesisnumber}{#1}}
\newcommand{\ecole}[1]{\renewcommand{\@ecole}{#1}}
\newcommand{\jury}[1]{\renewcommand{\@jury}{#1}}
\newcommand{\titlepagelogo}[1]{\renewcommand{\@logo}{#1}}

% Title Page Definition
\renewcommand{\maketitle}{%
	\thispagestyle{empty}
	\setstretch{1}
	\begin{center}
		\IfFileExists{\@logo}{%
			\includegraphics[width=0.99\linewidth]{\@logo}%
		}{%
			\ClassError{TEMPLATE}{Logo file \@logo\space not found}{}%
		}
	\end{center}
	
	\noindent N\textsuperscript{o} d'ordre NNT: \@thesisnumber
	\vskip 2cm
	
	\begin{center}
		\textbf{\Large THÈSE DE DOCTORAT DE L'UNIVERSITÉ DE LYON}\\
		\textbf{\Large opérée au sein de l'\@ecole \\[3ex]
			École Doctorale N\textsuperscript{o} \@ednumber} \\
		\textbf{\large Mécanique Énergétique Génie Civil Acoustique\\[3ex]
			Spécialité de doctorat : \@specialty} \\[5ex]
		{\large Soutenue publiquement le \@defensedate, par \\[1ex]
			\textbf{\@author}}
	\end{center}
	
	\vskip 8ex
	
	\noindent
	\rule{\textwidth}{1pt}
	
	\begin{center}
		\vskip 1ex
		{\LARGE\textbf{\@title}}
	\end{center}
	
	\noindent
	\rule{\textwidth}{1pt}
	\vskip 2cm
	
	\noindent Devant le jury composé de:
	\vskip 0.5cm
	
	\begin{tabbing}
		\hspace{-1.35cm}\=\hspace{3.4cm}\=\hspace{4.8cm}\=\hspace{8.1cm}\=\kill
		\@jury
	\end{tabbing}
}

% Page Layout
\geometry{top=80pt, bottom=75pt, left=70pt, right=70pt}
\setlength{\headheight}{12pt}

% Header/Footer Style
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\ifthenelse{\isodd{\value{page}}}{\textsl{\rightmark}}{}}
\fancyhead[L]{\ifthenelse{\isodd{\value{page}}}{}{\textsl{\leftmark}}}
\fancyfoot[R]{\ifthenelse{\isodd{\value{page}}}{\thepage}{}}
\fancyfoot[L]{\ifthenelse{\isodd{\value{page}}}{}{\thepage}}

% Load hyperref LAST
\RequirePackage[colorlinks=true]{hyperref}

\endinput

